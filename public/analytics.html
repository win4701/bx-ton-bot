<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bloxio Analytics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/app/styles.css" />
  <style>
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    .kpi{background:#12182a;border-radius:12px;padding:16px}
    .kpi h3{margin:0 0 8px;font-size:14px;color:#9aa3b2}
    .kpi .v{font-size:22px;font-weight:700}
    .muted{color:#9aa3b2;font-size:12px}
    @media(max-width:640px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <h1>ðŸ“Š Public Analytics</h1>
  </header>

  <main>
    <section class="grid">
      <div class="kpi">
        <h3>Total Users</h3>
        <div class="v" id="users">â€”</div>
        <div class="muted">All-time</div>
      </div>
      <div class="kpi">
        <h3>24h Volume</h3>
        <div class="v" id="vol24">â€”</div>
        <div class="muted">TON equivalent</div>
      </div>
      <div class="kpi">
        <h3>BX Burned</h3>
        <div class="v" id="burned">â€”</div>
        <div class="muted">Deflation</div>
      </div>
      <div class="kpi">
        <h3>Active Games</h3>
        <div class="v" id="games">â€”</div>
        <div class="muted">Crash / Chicken</div>
      </div>
    </section>

    <section class="card">
      <h2>Market</h2>
      <p class="muted">Source: internal price + STON reference</p>
      <div class="v" id="price">â€”</div>
      <div class="muted" id="change">â€”</div>
    </section>
  </main>

  <script>
    async function load(){
      const a = await fetch("/api/analytics").then(r=>r.json());
      users.textContent = a.users ?? "â€”";
      vol24.textContent = a.volume24 ?? "â€”";
      burned.textContent = a.burned ?? "â€”";
      games.textContent = a.games ?? "â€”";

      const p = await fetch("/api/price").then(r=>r.json());
      price.textContent = `BX/TON: ${p.price}`;
      change.textContent = `24h: ${p.change24h}`;
    }
    load();
    setInterval(load, 30000);
  </script>
</body>
</html>
